<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureLife Insurance | Client Portal Demo</title>
    <style>
        /* --- CSS STYLES (Unchanged) --- */
        :root { --primary-navy: #0a192f; --secondary-blue: #112240; --light-blue: #e6f1ff; --accent-green: #64ffda; --white: #ffffff; --grey: #f4f7f6; --danger: #d63031; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--white); color: #333; line-height: 1.6; }
        nav { background-color: var(--primary-navy); padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; color: var(--white); position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .logo { font-size: 1.5rem; font-weight: bold; letter-spacing: 1px; }
        .nav-links button { background: transparent; border: 1px solid var(--white); color: var(--white); padding: 8px 20px; border-radius: 5px; cursor: pointer; transition: 0.3s; font-size: 0.9rem; }
        .nav-links button:hover { background: var(--white); color: var(--primary-navy); }
        .container { max-width: 1100px; margin: 0 auto; padding: 2rem; }
        .hidden { display: none !important; }
        .btn-main { background-color: var(--primary-navy); color: var(--white); padding: 15px 30px; border: none; border-radius: 5px; font-size: 1rem; cursor: pointer; text-transform: uppercase; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn-main:hover { background-color: var(--secondary-blue); }
        .hero { background: linear-gradient(rgba(10, 25, 47, 0.9), rgba(10, 25, 47, 0.8)), url('https://images.unsplash.com/photo-1450101499163-c8848c66ca85?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80'); background-size: cover; background-position: center; height: 80vh; display: flex; align-items: center; justify-content: center; text-align: center; color: var(--white); }
        .hero h1 { font-size: 3.5rem; margin-bottom: 1rem; }
        .hero p { font-size: 1.2rem; color: #8892b0; max-width: 600px; margin: 0 auto 2rem auto; }
        .services { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: -50px; position: relative; z-index: 10; }
        .card { background: var(--white); padding: 2rem; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; border-top: 5px solid var(--primary-navy); }
        .card h3 { color: var(--primary-navy); margin-bottom: 1rem; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .login-box { background: var(--white); padding: 3rem; border-radius: 10px; width: 400px; text-align: center; }
        .input-group { margin-bottom: 1rem; text-align: left; }
        .input-group label { display: block; margin-bottom: 5px; color: var(--primary-navy); font-weight: bold; }
        .input-group input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .dashboard-header { background-color: var(--grey); padding: 2rem 0; border-bottom: 1px solid #ddd; }
        .welcome-banner { display: flex; justify-content: space-between; align-items: center; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .stat-card { background: var(--white); padding: 1.5rem; border-radius: 8px; border: 1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .stat-card.primary { background: var(--primary-navy); color: var(--white); }
        .stat-card h2 { font-size: 2rem; margin: 10px 0; }
        .stat-card .label { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.8; }
        .section-title { margin-top: 3rem; margin-bottom: 1rem; color: var(--primary-navy); border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .policy-card { background: var(--white); border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1.5rem; overflow: hidden; }
        .policy-header { background-color: #f8f9fa; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e0e0e0; }
        .policy-body { padding: 1.5rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
        .data-point span { display: block; font-size: 0.85rem; color: #666; margin-bottom: 4px; }
        .data-point strong { font-size: 1.1rem; color: var(--primary-navy); }
        .status { padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; }
        .active { background-color: #e6fffa; color: #00b894; border: 1px solid #00b894; }
        .review { background-color: #fffbea; color: #d69e2e; border: 1px solid #d69e2e; }
        .error-msg { color: var(--danger); font-size: 0.9rem; margin-bottom: 10px; display: none;}
        
        @media (max-width: 768px) {
            .policy-body { grid-template-columns: 1fr; }
            .hero h1 { font-size: 2.5rem; }
        }
    </style>
    <script type='text/javascript'>
    
    (function(){var g=function(g){
    
    this.go=function(){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)};
    
    this.start=function(){var t=this;"complete"!==document.readyState?window.addEventListener?window.addEventListener("load",function(){t.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){t.go()}):t.go()};};
    
    try{(new g("https://znekxwrd1dgfw3tag-usaa.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_ekxwrd1DGFW3TAG")).start()}catch(i){}})();
    
    </script><div id='ZN_ekxwrd1DGFW3TAG'></div>
    
    </head>
<body>

    <nav>
        <div class="logo">SecureLife</div>
        <div class="nav-links">
            <button id="loginBtn" onclick="toggleLoginModal()">Client Login</button>
            <button id="logoutBtn" onclick="performLogout()" class="hidden" style="background-color: var(--danger); border-color: var(--danger);">Log Out</button>
        </div>
    </nav>

    <div id="publicView">
        <div class="hero">
            <div class="hero-content">
                <h1>Protect What Matters Most</h1>
                <p>Modern insurance solutions for a changing world. Reliable coverage for your home, auto, and life.</p>
                <button class="btn-main">Get a Quote</button>
            </div>
        </div>

        <div class="container">
            <div class="services">
                <div class="card">
                    <h3>Auto Insurance</h3>
                    <p>Comprehensive coverage for the road ahead. Safe driver discounts available.</p>
                </div>
                <div class="card">
                    <h3>Home Insurance</h3>
                    <p>Protect your sanctuary against the unexpected with our premium home plans.</p>
                </div>
                <div class="card">
                    <h3>Life Insurance</h3>
                    <p>Secure your family's future with flexible term and whole life policies.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="dashboardView" class="hidden">
        <div class="dashboard-header">
            <div class="container welcome-banner">
                <div>
                    <h1 id="userWelcome">Welcome back...</h1>
                    <p>Client ID: <strong id="userId">#...</strong></p>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="stats-grid" id="statsContainer">
                </div>

            <h3 class="section-title">Your Policies</h3>

            <div id="policiesContainer">
                </div>
            
            <br><br>
        </div>
    </div>

    <div id="loginModal" class="modal-overlay hidden">
        <div class="login-box">
            <h2>Client Portal</h2>
            <p id="loginError" class="error-msg">Invalid email or password.</p>
            <p style="margin-bottom: 15px; font-size: 0.8rem; color: #666; text-align:left;">
                <strong>Try these demo users:</strong><br>
                Consult Demo Sheet for Logins<br>
                
            </p>
            <div class="input-group">
                <label>Email</label>
                <input type="email" id="emailInput" placeholder="Enter email">
            </div>
            <div class="input-group">
                <label>Password</label>
                <input type="password" id="passInput" placeholder="Enter password">
            </div>
            <button class="btn-main" onclick="attemptLogin()" style="width: 100%;">Sign In</button>
            <p style="margin-top: 10px; cursor: pointer; color: #666;" onclick="toggleLoginModal()">Cancel</p>
        </div>
    </div>

   <script>
    /* --- STATE TRACKING --- */
    let isLoggedIn = null; // Default state

    /* --- MOCK DATABASE (Fake Users) --- */
    const mockDatabase = {
        "robert@demo.com": {
            password: "pass123",
            name: "Robert",
            userId: "#8839201-US",
            stats: { due: "$248.50", coverage: "$1.25M", savings: "$420.00", claims: "0" },
            policies: [
                {
                    title: "2024 Tesla Model Y",
                    sub: "Policy #: AUT-99284-TX",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Comprehensive" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$148.50 / mo" }]
                },
                {
                    title: "123 Maple Avenue",
                    sub: "Policy #: HOM-11205-TX",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$650,000" }, { label: "Property", val: "$150,000" }, { label: "Premium", val: "$1,200 / yr" }]
                },
                {
                    title: "Term Life (20 Year)",
                    sub: "Policy #: LIF-77319-US",
                    status: "Review",
                    details: [{ label: "Benefit", val: "$500,000" }, { label: "Beneficiary", val: "Jane Doe" }, { label: "Premium", val: "$45.00 / mo" }]
                }
            ]
        },
        "sarah@demo.com": {
            password: "pass123",
            name: "Sarah",
            userId: "#9921005-NY",
            stats: { due: "$85.00", coverage: "$45,000", savings: "$50.00", claims: "1" },
            policies: [
                {
                    title: "2018 Honda Civic",
                    sub: "Policy #: AUT-55412-NY",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Liability Only" }, { label: "Deductible", val: "$1,000.00" }, { label: "Premium", val: "$85.00 / mo" }]
                }
            ]
        },
        "james@demo.com": {
            password: "pass123",
            name: "James",
            userId: "#1029384-CA",
            stats: { due: "$195.00", coverage: "$750,000", savings: "$120.00", claims: "0" },
            policies: [
                {
                    title: "2022 Ford F-150",
                    sub: "Policy #: AUT-10293-CA",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Comprehensive" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$110.00 / mo" }]
                },
                {
                    title: "450 Ocean Drive",
                    sub: "Policy #: HOM-49201-CA",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$950,000" }, { label: "Property", val: "$200,000" }, { label: "Premium", val: "$1,020 / yr" }]
                }
            ]
        },
        "emily@demo.com": {
            password: "pass123",
            name: "Emily",
            userId: "#5647382-WA",
            stats: { due: "$32.00", coverage: "$25,000", savings: "$15.00", claims: "0" },
            policies: [
                {
                    title: "Apartment 4B",
                    sub: "Policy #: REN-99201-WA",
                    status: "Active",
                    details: [{ label: "Personal Prop", val: "$25,000" }, { label: "Liability", val: "$100,000" }, { label: "Premium", val: "$32.00 / mo" }]
                }
            ]
        },
        "michael@demo.com": {
            password: "pass123",
            name: "Michael",
            userId: "#7748392-FL",
            stats: { due: "$210.00", coverage: "$500,000", savings: "$0.00", claims: "2" },
            policies: [
                {
                    title: "2020 Chevrolet Tahoe",
                    sub: "Policy #: AUT-66382-FL",
                    status: "Review",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$250.00" }, { label: "Premium", val: "$210.00 / mo" }]
                }
            ]
        },
        "jessica@demo.com": {
            password: "pass123",
            name: "Jessica",
            userId: "#3321094-IL",
            stats: { due: "$145.50", coverage: "$1.0M", savings: "$310.00", claims: "0" },
            policies: [
                {
                    title: "Whole Life",
                    sub: "Policy #: LIF-11293-IL",
                    status: "Active",
                    details: [{ label: "Benefit", val: "$1,000,000" }, { label: "Cash Value", val: "$12,400" }, { label: "Premium", val: "$145.50 / mo" }]
                }
            ]
        },
        "david@demo.com": {
            password: "pass123",
            name: "David",
            userId: "#5564738-TX",
            stats: { due: "$95.00", coverage: "$60,000", savings: "$25.00", claims: "0" },
            policies: [
                {
                    title: "2015 Toyota Tacoma",
                    sub: "Policy #: AUT-44532-TX",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Liability" }, { label: "Deductible", val: "$1,000.00" }, { label: "Premium", val: "$95.00 / mo" }]
                }
            ]
        },
        "ashley@demo.com": {
            password: "pass123",
            name: "Ashley",
            userId: "#9982710-AZ",
            stats: { due: "$120.00", coverage: "$300,000", savings: "$45.00", claims: "0" },
            policies: [
                {
                    title: "22 Sunset Blvd",
                    sub: "Policy #: HOM-88291-AZ",
                    status: "Pending",
                    details: [{ label: "Dwelling", val: "$300,000" }, { label: "Property", val: "$80,000" }, { label: "Premium", val: "$1,440 / yr" }]
                }
            ]
        },
        "daniel@demo.com": {
            password: "pass123",
            name: "Daniel",
            userId: "#1122334-CO",
            stats: { due: "$275.00", coverage: "$800,000", savings: "$150.00", claims: "1" },
            policies: [
                {
                    title: "2023 Subaru Outback",
                    sub: "Policy #: AUT-77123-CO",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$135.00 / mo" }]
                },
                {
                    title: "Mountain Cabin",
                    sub: "Policy #: HOM-11928-CO",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$450,000" }, { label: "Fire Risk", val: "High" }, { label: "Premium", val: "$140.00 / mo" }]
                }
            ]
        },
        "linda@demo.com": {
            password: "pass123",
            name: "Linda",
            userId: "#4455667-NV",
            stats: { due: "$65.00", coverage: "$20,000", savings: "$10.00", claims: "0" },
            policies: [
                {
                    title: "Condo Unit 302",
                    sub: "Policy #: CON-33421-NV",
                    status: "Active",
                    details: [{ label: "Walls-In", val: "$50,000" }, { label: "Liability", val: "$100,000" }, { label: "Premium", val: "$65.00 / mo" }]
                }
            ]
        },
        "paul@demo.com": {
            password: "pass123",
            name: "Paul",
            userId: "#7788990-OR",
            stats: { due: "$180.00", coverage: "$500,000", savings: "$60.00", claims: "0" },
            policies: [
                {
                    title: "2021 Jeep Wrangler",
                    sub: "Policy #: AUT-22134-OR",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Comprehensive" }, { label: "Off-road", val: "Included" }, { label: "Premium", val: "$180.00 / mo" }]
                }
            ]
        },
        "karen@demo.com": {
            password: "pass123",
            name: "Karen",
            userId: "#2233445-MA",
            stats: { due: "$310.00", coverage: "$1.5M", savings: "$200.00", claims: "0" },
            policies: [
                {
                    title: "15 Colonial Way",
                    sub: "Policy #: HOM-55612-MA",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$850,000" }, { label: "Property", val: "$250,000" }, { label: "Premium", val: "$3,720 / yr" }]
                }
            ]
        },
        "steven@demo.com": {
            password: "pass123",
            name: "Steven",
            userId: "#9900112-FL",
            stats: { due: "$92.50", coverage: "$100,000", savings: "$25.00", claims: "0" },
            policies: [
                {
                    title: "Boat Insurance",
                    sub: "Policy #: MAR-11029-FL",
                    status: "Active",
                    details: [{ label: "Vessel", val: "20ft Boston Whaler" }, { label: "Liability", val: "$300,000" }, { label: "Premium", val: "$92.50 / mo" }]
                }
            ]
        },
        "patricia@demo.com": {
            password: "pass123",
            name: "Patricia",
            userId: "#6677881-OH",
            stats: { due: "$115.00", coverage: "$250,000", savings: "$40.00", claims: "1" },
            policies: [
                {
                    title: "2019 Nissan Rogue",
                    sub: "Policy #: AUT-99123-OH",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$115.00 / mo" }]
                }
            ]
        },
        "thomas@demo.com": {
            password: "pass123",
            name: "Thomas",
            userId: "#5511223-MI",
            stats: { due: "$220.00", coverage: "$600,000", savings: "$0.00", claims: "3" },
            policies: [
                {
                    title: "2016 Ford Explorer",
                    sub: "Policy #: AUT-33211-MI",
                    status: "Review",
                    details: [{ label: "Coverage", val: "High Risk" }, { label: "Deductible", val: "$1,500.00" }, { label: "Premium", val: "$220.00 / mo" }]
                }
            ]
        },
        "jennifer@demo.com": {
            password: "pass123",
            name: "Jennifer",
            userId: "#3344112-GA",
            stats: { due: "$130.00", coverage: "$400,000", savings: "$55.00", claims: "0" },
            policies: [
                {
                    title: "Term Life (10 Year)",
                    sub: "Policy #: LIF-88129-GA",
                    status: "Active",
                    details: [{ label: "Benefit", val: "$400,000" }, { label: "Beneficiary", val: "Mark Smith" }, { label: "Premium", val: "$35.00 / mo" }]
                },
                {
                    title: "2020 Kia Soul",
                    sub: "Policy #: AUT-11234-GA",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$95.00 / mo" }]
                }
            ]
        },
        "charles@demo.com": {
            password: "pass123",
            name: "Charles",
            userId: "#8822991-NC",
            stats: { due: "$78.00", coverage: "$35,000", savings: "$12.00", claims: "0" },
            policies: [
                {
                    title: "Renters Policy",
                    sub: "Policy #: REN-55112-NC",
                    status: "Active",
                    details: [{ label: "Contents", val: "$35,000" }, { label: "Liability", val: "$100,000" }, { label: "Premium", val: "$25.00 / mo" }]
                },
                {
                    title: "Motorcycle",
                    sub: "Policy #: MOT-11002-NC",
                    status: "Active",
                    details: [{ label: "Bike", val: "Harley Sportster" }, { label: "Premium", val: "$53.00 / mo" }]
                }
            ]
        },
        "elizabeth@demo.com": {
            password: "pass123",
            name: "Elizabeth",
            userId: "#1199228-VA",
            stats: { due: "$450.00", coverage: "$2.0M", savings: "$500.00", claims: "0" },
            policies: [
                {
                    title: "Estate Home",
                    sub: "Policy #: HOM-77112-VA",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$1,500,000" }, { label: "Jewelry Rider", val: "$50,000" }, { label: "Premium", val: "$450.00 / mo" }]
                }
            ]
        },
        "matthew@demo.com": {
            password: "pass123",
            name: "Matthew",
            userId: "#2288337-PA",
            stats: { due: "$160.00", coverage: "$50,000", savings: "$30.00", claims: "1" },
            policies: [
                {
                    title: "2017 Honda Accord",
                    sub: "Policy #: AUT-66123-PA",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$750.00" }, { label: "Premium", val: "$160.00 / mo" }]
                }
            ]
        },
        "susan@demo.com": {
            password: "pass123",
            name: "Susan",
            userId: "#5511992-TN",
            stats: { due: "$210.00", coverage: "$650,000", savings: "$110.00", claims: "0" },
            policies: [
                {
                    title: "2023 Toyota Highlander",
                    sub: "Policy #: AUT-88221-TN",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$250.00" }, { label: "Premium", val: "$110.00 / mo" }]
                },
                {
                    title: "88 Country Lane",
                    sub: "Policy #: HOM-33211-TN",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$400,000" }, { label: "Flood", val: "Excluded" }, { label: "Premium", val: "$1,200 / yr" }]
                }
            ]
        },
        "joseph@demo.com": {
            password: "pass123",
            name: "Joseph",
            userId: "#4433221-NJ",
            stats: { due: "$195.00", coverage: "$400,000", savings: "$0.00", claims: "0" },
            policies: [
                {
                    title: "2021 Audi A4",
                    sub: "Policy #: AUT-99112-NJ",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Comprehensive" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$195.00 / mo" }]
                }
            ]
        },
        "margaret@demo.com": {
            password: "pass123",
            name: "Margaret",
            userId: "#7766551-MO",
            stats: { due: "$88.00", coverage: "$150,000", savings: "$22.00", claims: "0" },
            policies: [
                {
                    title: "Senior Life Plan",
                    sub: "Policy #: LIF-22331-MO",
                    status: "Active",
                    details: [{ label: "Benefit", val: "$25,000" }, { label: "Final Expense", val: "Included" }, { label: "Premium", val: "$88.00 / mo" }]
                }
            ]
        },
        "andrew@demo.com": {
            password: "pass123",
            name: "Andrew",
            userId: "#1155992-WI",
            stats: { due: "$135.00", coverage: "$300,000", savings: "$50.00", claims: "0" },
            policies: [
                {
                    title: "2019 Ford Mustang",
                    sub: "Policy #: AUT-44112-WI",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$135.00 / mo" }]
                }
            ]
        },
        "lisa@demo.com": {
            password: "pass123",
            name: "Lisa",
            userId: "#9988221-MN",
            stats: { due: "$240.00", coverage: "$850,000", savings: "$120.00", claims: "0" },
            policies: [
                {
                    title: "Lake House",
                    sub: "Policy #: HOM-55112-MN",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$600,000" }, { label: "Dock", val: "Included" }, { label: "Premium", val: "$240.00 / mo" }]
                }
            ]
        },
        "richard@demo.com": {
            password: "pass123",
            name: "Richard",
            userId: "#3322114-IN",
            stats: { due: "$110.00", coverage: "$50,000", savings: "$15.00", claims: "1" },
            policies: [
                {
                    title: "2014 Chevy Silverado",
                    sub: "Policy #: AUT-77112-IN",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Liability" }, { label: "Deductible", val: "$1,000.00" }, { label: "Premium", val: "$110.00 / mo" }]
                }
            ]
        },
        "betty@demo.com": {
            password: "pass123",
            name: "Betty",
            userId: "#5566771-SC",
            stats: { due: "$165.00", coverage: "$400,000", savings: "$45.00", claims: "0" },
            policies: [
                {
                    title: "Beach Cottage",
                    sub: "Policy #: HOM-22119-SC",
                    status: "Pending",
                    details: [{ label: "Dwelling", val: "$350,000" }, { label: "Hurricane", val: "Separate" }, { label: "Premium", val: "$1,980 / yr" }]
                }
            ]
        },
        "william@demo.com": {
            password: "pass123",
            name: "William",
            userId: "#8899001-KY",
            stats: { due: "$300.00", coverage: "$1.0M", savings: "$150.00", claims: "0" },
            policies: [
                {
                    title: "Umbrella Policy",
                    sub: "Policy #: UMB-11223-KY",
                    status: "Active",
                    details: [{ label: "Limit", val: "$1,000,000" }, { label: "Excess Liab", val: "Included" }, { label: "Premium", val: "$300.00 / yr" }]
                },
                {
                    title: "2022 BMW X5",
                    sub: "Policy #: AUT-33211-KY",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Premium" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$275.00 / mo" }]
                }
            ]
        },
        "sandra@demo.com": {
            password: "pass123",
            name: "Sandra",
            userId: "#4455112-AL",
            stats: { due: "$85.00", coverage: "$30,000", savings: "$20.00", claims: "0" },
            policies: [
                {
                    title: "Renters Ins",
                    sub: "Policy #: REN-88112-AL",
                    status: "Active",
                    details: [{ label: "Personal Prop", val: "$30,000" }, { label: "Loss of Use", val: "$5,000" }, { label: "Premium", val: "$85.00 / mo" }]
                }
            ]
        },
        "christopher@demo.com": {
            password: "pass123",
            name: "Christopher",
            userId: "#1122998-LA",
            stats: { due: "$215.00", coverage: "$200,000", savings: "$10.00", claims: "1" },
            policies: [
                {
                    title: "2021 Dodge Ram",
                    sub: "Policy #: AUT-66112-LA",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$215.00 / mo" }]
                }
            ]
        },
        "nancy@demo.com": {
            password: "pass123",
            name: "Nancy",
            userId: "#9988112-CT",
            stats: { due: "$180.00", coverage: "$750,000", savings: "$90.00", claims: "0" },
            policies: [
                {
                    title: "34 Oak Street",
                    sub: "Policy #: HOM-33221-CT",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$550,000" }, { label: "Other Struct", val: "$55,000" }, { label: "Premium", val: "$2,160 / yr" }]
                }
            ]
        },
        "brian@demo.com": {
            password: "pass123",
            name: "Brian",
            userId: "#3311224-UT",
            stats: { due: "$105.00", coverage: "$50,000", savings: "$35.00", claims: "0" },
            policies: [
                {
                    title: "2018 Subaru Forester",
                    sub: "Policy #: AUT-55443-UT",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$105.00 / mo" }]
                }
            ]
        },
        "helen@demo.com": {
            password: "pass123",
            name: "Helen",
            userId: "#7711223-OK",
            stats: { due: "$70.00", coverage: "$25,000", savings: "$15.00", claims: "0" },
            policies: [
                {
                    title: "2010 Honda CR-V",
                    sub: "Policy #: AUT-11229-OK",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Liability" }, { label: "Deductible", val: "$1,000.00" }, { label: "Premium", val: "$70.00 / mo" }]
                }
            ]
        },
        "anthony@demo.com": {
            password: "pass123",
            name: "Anthony",
            userId: "#6611229-NV",
            stats: { due: "$350.00", coverage: "$1.0M", savings: "$100.00", claims: "1" },
            policies: [
                {
                    title: "Commercial Auto",
                    sub: "Policy #: COM-88112-NV",
                    status: "Active",
                    details: [{ label: "Fleet", val: "3 Vans" }, { label: "Liability", val: "$1M" }, { label: "Premium", val: "$350.00 / mo" }]
                }
            ]
        },
        "dorothy@demo.com": {
            password: "pass123",
            name: "Dorothy",
            userId: "#2211334-KS",
            stats: { due: "$125.00", coverage: "$250,000", savings: "$40.00", claims: "0" },
            policies: [
                {
                    title: "Farm House",
                    sub: "Policy #: HOM-55441-KS",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$200,000" }, { label: "Wind/Hail", val: "$2,000 Ded" }, { label: "Premium", val: "$1,500 / yr" }]
                }
            ]
        },
        "mark@demo.com": {
            password: "pass123",
            name: "Mark",
            userId: "#9933112-IA",
            stats: { due: "$190.00", coverage: "$500,000", savings: "$60.00", claims: "0" },
            policies: [
                {
                    title: "Whole Life",
                    sub: "Policy #: LIF-11223-IA",
                    status: "Active",
                    details: [{ label: "Benefit", val: "$500,000" }, { label: "Premium", val: "$190.00 / mo" }, { label: "Paid Up", val: "No" }]
                }
            ]
        },
        "amy@demo.com": {
            password: "pass123",
            name: "Amy",
            userId: "#4411229-AR",
            stats: { due: "$95.00", coverage: "$45,000", savings: "$25.00", claims: "0" },
            policies: [
                {
                    title: "2016 Hyundai Elantra",
                    sub: "Policy #: AUT-33112-AR",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$95.00 / mo" }]
                }
            ]
        },
        "jason@demo.com": {
            password: "pass123",
            name: "Jason",
            userId: "#8811332-MS",
            stats: { due: "$140.00", coverage: "$100,000", savings: "$40.00", claims: "0" },
            policies: [
                {
                    title: "2022 Chevy Malibu",
                    sub: "Policy #: AUT-77112-MS",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$140.00 / mo" }]
                }
            ]
        },
        "michelle@demo.com": {
            password: "pass123",
            name: "Michelle",
            userId: "#5522119-NM",
            stats: { due: "$115.00", coverage: "$300,000", savings: "$30.00", claims: "0" },
            policies: [
                {
                    title: "Adobe Home",
                    sub: "Policy #: HOM-11229-NM",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$300,000" }, { label: "Flood", val: "Excluded" }, { label: "Premium", val: "$1,380 / yr" }]
                }
            ]
        },
        "jeffrey@demo.com": {
            password: "pass123",
            name: "Jeffrey",
            userId: "#2233119-ID",
            stats: { due: "$165.00", coverage: "$60,000", savings: "$0.00", claims: "2" },
            policies: [
                {
                    title: "2020 GMC Sierra",
                    sub: "Policy #: AUT-66112-ID",
                    status: "Review",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$1,000.00" }, { label: "Premium", val: "$165.00 / mo" }]
                }
            ]
        },
        "laura@demo.com": {
            password: "pass123",
            name: "Laura",
            userId: "#1144223-WV",
            stats: { due: "$80.00", coverage: "$20,000", savings: "$15.00", claims: "0" },
            policies: [
                {
                    title: "Renters",
                    sub: "Policy #: REN-99112-WV",
                    status: "Active",
                    details: [{ label: "Contents", val: "$20,000" }, { label: "Liability", val: "$100,000" }, { label: "Premium", val: "$22.00 / mo" }]
                },
                {
                    title: "2012 Ford Focus",
                    sub: "Policy #: AUT-22113-WV",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Liability" }, { label: "Premium", val: "$58.00 / mo" }]
                }
            ]
        },
        "ryan@demo.com": {
            password: "pass123",
            name: "Ryan",
            userId: "#7722119-NE",
            stats: { due: "$130.00", coverage: "$400,000", savings: "$50.00", claims: "0" },
            policies: [
                {
                    title: "Term Life (30 Year)",
                    sub: "Policy #: LIF-33112-NE",
                    status: "Active",
                    details: [{ label: "Benefit", val: "$400,000" }, { label: "Premium", val: "$130.00 / mo" }, { label: "Expires", val: "2054" }]
                }
            ]
        },
        "sarahjane@demo.com": {
            password: "pass123",
            name: "SarahJane",
            userId: "#6633112-MT",
            stats: { due: "$210.00", coverage: "$500,000", savings: "$80.00", claims: "0" },
            policies: [
                {
                    title: "Ranch Property",
                    sub: "Policy #: HOM-88112-MT",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$400,000" }, { label: "Outbuildings", val: "$100,000" }, { label: "Premium", val: "$2,520 / yr" }]
                }
            ]
        },
        "gary@demo.com": {
            password: "pass123",
            name: "Gary",
            userId: "#1199332-WY",
            stats: { due: "$150.00", coverage: "$75,000", savings: "$40.00", claims: "0" },
            policies: [
                {
                    title: "2021 Toyota Tundra",
                    sub: "Policy #: AUT-55112-WY",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$150.00 / mo" }]
                }
            ]
        },
        "kimberly@demo.com": {
            password: "pass123",
            name: "Kimberly",
            userId: "#3322441-ND",
            stats: { due: "$95.00", coverage: "$50,000", savings: "$20.00", claims: "0" },
            policies: [
                {
                    title: "2018 Jeep Cherokee",
                    sub: "Policy #: AUT-22119-ND",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$95.00 / mo" }]
                }
            ]
        },
        "nicholas@demo.com": {
            password: "pass123",
            name: "Nicholas",
            userId: "#7744112-SD",
            stats: { due: "$175.00", coverage: "$350,000", savings: "$60.00", claims: "0" },
            policies: [
                {
                    title: "22 Pine Road",
                    sub: "Policy #: HOM-99112-SD",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$250,000" }, { label: "Property", val: "$100,000" }, { label: "Premium", val: "$1,800 / yr" }]
                }
            ]
        },
        "eric@demo.com": {
            password: "pass123",
            name: "Eric",
            userId: "#5511332-AK",
            stats: { due: "$160.00", coverage: "$60,000", savings: "$30.00", claims: "1" },
            policies: [
                {
                    title: "2020 Ford Escape",
                    sub: "Policy #: AUT-11229-AK",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$160.00 / mo" }]
                }
            ]
        },
        "stephen@demo.com": {
            password: "pass123",
            name: "Stephen",
            userId: "#8822119-HI",
            stats: { due: "$220.00", coverage: "$800,000", savings: "$90.00", claims: "0" },
            policies: [
                {
                    title: "Beachfront Condo",
                    sub: "Policy #: HOM-33112-HI",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$700,000" }, { label: "Hurricane", val: "Included" }, { label: "Premium", val: "$2,640 / yr" }]
                }
            ]
        },
        "larry@demo.com": {
            password: "pass123",
            name: "Larry",
            userId: "#6611442-DE",
            stats: { due: "$110.00", coverage: "$40,000", savings: "$25.00", claims: "0" },
            policies: [
                {
                    title: "2017 Nissan Altima",
                    sub: "Policy #: AUT-22119-DE",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Standard" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$110.00 / mo" }]
                }
            ]
        },
        "rebecca@demo.com": {
            password: "pass123",
            name: "Rebecca",
            userId: "#4411992-RI",
            stats: { due: "$185.00", coverage: "$500,000", savings: "$70.00", claims: "0" },
            policies: [
                {
                    title: "Townhouse",
                    sub: "Policy #: HOM-55112-RI",
                    status: "Active",
                    details: [{ label: "Dwelling", val: "$400,000" }, { label: "Prop", val: "$100,000" }, { label: "Premium", val: "$2,220 / yr" }]
                }
            ]
        },
        "frank@demo.com": {
            password: "pass123",
            name: "Frank",
            userId: "#2299113-VT",
            stats: { due: "$135.00", coverage: "$75,000", savings: "$45.00", claims: "0" },
            policies: [
                {
                    title: "2019 Toyota RAV4",
                    sub: "Policy #: AUT-77112-VT",
                    status: "Active",
                    details: [{ label: "Coverage", val: "Full" }, { label: "Deductible", val: "$500.00" }, { label: "Premium", val: "$135.00 / mo" }]
                }
            ]
        }
    };

    // DOM Elements
    const publicView = document.getElementById('publicView');
    const dashboardView = document.getElementById('dashboardView');
    const loginModal = document.getElementById('loginModal');
    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const errorMsg = document.getElementById('loginError');

    // Inputs
    const emailInput = document.getElementById('emailInput');
    const passInput = document.getElementById('passInput');

    // Dashboard targets
    const userWelcome = document.getElementById('userWelcome');
    const userIdDisplay = document.getElementById('userId'); 
    const statsContainer = document.getElementById('statsContainer');
    const policiesContainer = document.getElementById('policiesContainer');

    function toggleLoginModal() {
        if (loginModal) loginModal.classList.toggle('hidden');
        if (errorMsg) errorMsg.style.display = 'none';
        if (emailInput) emailInput.value = "";
        if (passInput) passInput.value = "";
    }

    function attemptLogin() {
        const email = emailInput.value.toLowerCase().trim();
        const password = passInput.value;

        // CHECK DATABASE
        if (mockDatabase[email] && mockDatabase[email].password === password) {

            // --- SUCCESS: User Authenticated ---
            isLoggedIn = 1; // <--- SET STATE TO 1
            
            const user = mockDatabase[email];
            const extRef = user.userId; 

            // QUALTRICS CODE SNIPPET
            if (typeof QSI === "undefined") {
                QSI = {};
                QSI.config = {
                    externalReference: extRef
                };
            } else {
                if (!QSI.config) QSI.config = {};
                QSI.config.externalReference = extRef;

                // SPA REFRESH
                if (QSI.API) {
                    QSI.API.unload();
                    QSI.API.load();
                    console.log("Qualtrics reloaded with User ID:", extRef);
                }
            }

            // PROCEED WITH DASHBOARD LOAD
            loadDashboard(user);
            
            // Switch Views
            loginModal.classList.add('hidden');
            publicView.classList.add('hidden');
            dashboardView.classList.remove('hidden');
            loginBtn.classList.add('hidden');
            logoutBtn.classList.remove('hidden');
            window.scrollTo(0, 0);

            console.log("Login Success. isLoggedIn =", isLoggedIn);

        } else {
            // FAIL
            errorMsg.style.display = 'block';
        }
    }

    function performLogout() {
        isLoggedIn = null; // <--- RESET STATE TO NULL
        
        dashboardView.classList.add('hidden');
        publicView.classList.remove('hidden');
        logoutBtn.classList.add('hidden');
        loginBtn.classList.remove('hidden');
        
        // Reset Qualtrics config on logout
        if (typeof QSI !== "undefined" && QSI.config) {
            QSI.config.externalReference = null;
        }

        console.log("Logged Out. isLoggedIn =", isLoggedIn);
    }

    function loadDashboard(user) {
        userWelcome.innerText = `Welcome back, ${user.name}`;
        userIdDisplay.innerText = user.userId;

        statsContainer.innerHTML = `
            <div class="stat-card primary">
                <p class="label">Next Payment Due</p>
                <h2>${user.stats.due}</h2>
            </div>
            <div class="stat-card">
                <p class="label">Total Coverage</p>
                <h2>${user.stats.coverage}</h2>
            </div>
            <div class="stat-card">
                <p class="label">Yearly Savings</p>
                <h2 style="color: #00b894;">${user.stats.savings}</h2>
            </div>
            <div class="stat-card">
                <p class="label">Open Claims</p>
                <h2>${user.stats.claims}</h2>
            </div>
        `;

        let policiesHTML = '';
        user.policies.forEach(policy => {
            let statusClass = policy.status === 'Active' ? 'active' : 'review';
            let detailsHTML = '';
            policy.details.forEach(d => {
                detailsHTML += `
                    <div class="data-point">
                        <span>${d.label}</span>
                        <strong>${d.val}</strong>
                    </div>
                `;
            });
            policiesHTML += `
                <div class="policy-card">
                    <div class="policy-header">
                        <div><h4>${policy.title}</h4><small>${policy.sub}</small></div>
                        <span class="status ${statusClass}">${policy.status}</span>
                    </div>
                    <div class="policy-body">
                        ${detailsHTML}
                    </div>
                </div>
            `;
        });
        policiesContainer.innerHTML = policiesHTML;
    }
</script>
</body>
</html>
